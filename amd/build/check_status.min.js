define("paygw_fawry/check_status",["exports","core/ajax","jquery"],(function(_exports,_ajax,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module check_status
   *
   * @module     paygw_fawry/check_status
   * @copyright  2024 Mohammad Farouk <phun.for.physics@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */let successUrl,disabledTimeout;function checkStatus(orderId){return _ajax.default.call([{methodname:"paygw_fawry_check_status",args:{orderid:orderId}}])[0]}async function instantCheck(orderId){let requests=_ajax.default.call([{methodname:"paygw_fawry_instant_check",args:{orderid:orderId}}]),data=await requests[0];console.log(data)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_jquery=_interopRequireDefault(_jquery);_exports.init=function(){let orderid=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,url=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(orderid){successUrl=url;var interval=setInterval((async()=>{let response=await checkStatus();"success"===response.status?(clearInterval(interval),window.location.href=successUrl):"failed"===response.status&&clearInterval(interval),(0,_jquery.default)('[data-purpose="status"]').text(response.status)}),15e3)}let button=(0,_jquery.default)('button[data-action="check-status"]');button.on("click",(function(){let $this=(0,_jquery.default)(this);$this.data("orderid")&&(clearTimeout(disabledTimeout),$this.attr("disabled",!0),instantCheck(),disabledTimeout=setTimeout((function(){$this.attr("disabled",!1)}),3e4))}))}}));

//# sourceMappingURL=check_status.min.js.map